<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard API Test</title>
    <style>
        body { font-family: Arial; margin: 20px; }
        .test { border: 1px solid #ccc; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .pass { background: #d4edda; border-color: #28a745; }
        .fail { background: #f8d7da; border-color: #dc3545; }
        .pending { background: #e2e3e5; border-color: #6c757d; }
        h2 { color: #333; }
        .endpoint { font-family: monospace; background: #f5f5f5; padding: 5px 10px; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>Dashboard API Endpoints Test</h1>
    
    <div class="test pending">
        <h2>Test 1: Leaderboard Monthly</h2>
        <p>Endpoint: <span class="endpoint">GET /api/user/leaderboard/monthly</span></p>
        <p id="test1-result">Testing...</p>
    </div>

    <div class="test pending">
        <h2>Test 2: Learning Statistics</h2>
        <p>Endpoint: <span class="endpoint">GET /api/user/dashboard/statistics</span></p>
        <p id="test2-result">Testing...</p>
    </div>

    <div class="test pending">
        <h2>Test 3: Goals</h2>
        <p>Endpoint: <span class="endpoint">GET /api/user/dashboard/goals</span></p>
        <p id="test3-result">Testing...</p>
    </div>

    <script>
        async function testEndpoint(endpoint, testId) {
            try {
                const response = await fetch(`/api${endpoint}`);
                const resultEl = document.getElementById(testId);
                if (response.ok) {
                    const data = await response.json();
                    resultEl.innerHTML = `✅ <strong>PASSED</strong> - Status: 200<br>Response keys: ${Object.keys(data).join(', ')}`;
                    resultEl.parentElement.classList.add('pass');
                    resultEl.parentElement.classList.remove('pending');
                } else {
                    resultEl.innerHTML = `❌ <strong>FAILED</strong> - Status: ${response.status}`;
                    resultEl.parentElement.classList.add('fail');
                    resultEl.parentElement.classList.remove('pending');
                }
            } catch (error) {
                const resultEl = document.getElementById(testId);
                resultEl.innerHTML = `❌ <strong>ERROR</strong> - ${error.message}`;
                resultEl.parentElement.classList.add('fail');
                resultEl.parentElement.classList.remove('pending');
            }
        }

        // Run tests
        testEndpoint('/user/leaderboard/monthly', 'test1-result');
        testEndpoint('/user/dashboard/statistics', 'test2-result');
        testEndpoint('/user/dashboard/goals', 'test3-result');
    </script>
</body>
</html>
